{% extends "base.html" %}
{% block main %}
<div class = "d-flex align-items-center justify-content-center container my-5">
  <form class="d-flex w-50" role="search" action="/" method="POST">
    {% csrf_token %}
    <input class="form-control" name = "searchpara" type="search" placeholder="Search" aria-label="Search">
    <button class="btn btn-success mx-3" type="submit">Search</button>
  </form>
</div>
<h3 class="text-center">Total Results : {{results}}</h3>
<table class="table container">
  <thead>
      <tr>
        <th scope="col">Row No</th>
        <th scope="col">Student Id</th>
        <th scope="col">Student Name</th>
        <th scope="col">Department</th>
        <th scope="col">Email ID</th>
        <th scope="col">Address</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
    {% for s in data %}
      <tr>
        <th scope="row" id="{{forloop.counter}}">{{forloop.counter}}</th>
        <td scope="row"><a href="marks/{{s.stu_id.student_id}}">{{s.stu_id.student_id}}</a></td>
        <td>{{s.stu_name}}</td>
        <td>{{s.dept.department}}</td>
        <td>{{s.stu_email}}</td>
        <td>{{s.stu_address}}</td>
        <td><button class="btn btn-sm btn-danger" onclick="delete_student()">Delete</button></td>
        <script>
          var s{{forloop.counter}} = {{forloop.counter}}+{{row_no}}-1
          document.getElementById("{{forloop.counter}}").innerHTML = s{{forloop.counter}};
        </script>
      </tr>
    {% endfor %}
    </tbody>
</table>
<div aria-label="Page navigation example" class="container">
      <ul class="pagination">
        {% if data.has_previous %}
        <li class="page-item"><a href="?page=1" class = "page-link">&laquo; first</a></li>
          <li class="page-item"><a href="?page={{ data.previous_page_number }}" class = "page-link">previous</a></li>
        {% endif %}

        <li class="page-item mx-2 judtify-center mt-1">
            Page {{ data.number }} of {{ data.paginator.num_pages }}.
        </li>

        {% if data.has_next %}
        <li class="page-item"><a href="?page={{ data.next_page_number }}" class = "page-link">next</a></li>
          <li class="page-item"><a href="?page={{ data.paginator.num_pages }}" class = "page-link">last &raquo;</a></li>
        {% endif %}
      </ul>
</div>
  
{% endblock %}